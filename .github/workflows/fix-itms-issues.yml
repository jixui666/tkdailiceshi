name: ä¿®å¤TikTok IPAçš„ITMSé—®é¢˜

on:
  workflow_dispatch:
    inputs:
      ipa_url:
        description: 'IPAæ–‡ä»¶ä¸‹è½½é“¾æ¥ (å¯é€‰ï¼Œå¦‚æœä¸æä¾›åˆ™ä½¿ç”¨ä»“åº“ä¸­çš„IPA)'
        required: false
        type: string
      fix_encryption:
        description: 'ä¿®å¤åŠ å¯†é—®é¢˜'
        required: true
        default: true
        type: boolean
      fix_pie:
        description: 'å°è¯•ä¿®å¤PIEé—®é¢˜'
        required: true
        default: true
        type: boolean
      create_ipa:
        description: 'åˆ›å»ºä¿®å¤åçš„IPAæ–‡ä»¶'
        required: true
        default: true
        type: boolean
  push:
    paths:
      - 'Payload/**'
      - '.github/workflows/fix-itms-issues.yml'
  pull_request:
    paths:
      - 'Payload/**'

env:
  XCODE_VERSION: "15.0"

jobs:
  fix-itms-issues:
    name: ä¿®å¤ITMSé”™è¯¯
    runs-on: macos-latest
    
    steps:
    - name: æ£€å‡ºä»£ç 
      uses: actions/checkout@v4
      with:
        fetch-depth: 0

    - name: è®¾ç½®Pythonç¯å¢ƒ
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'

    - name: å®‰è£…ä¾èµ–å·¥å…·
      run: |
        # å®‰è£…Xcodeå‘½ä»¤è¡Œå·¥å…·
        sudo xcode-select --install || true
        
        # å®‰è£…optool (ç”¨äºç§»é™¤åŠ å¯†)
        if ! command -v optool &> /dev/null; then
          echo "å®‰è£…optool..."
          brew install optool || {
            echo "ä»æºç å®‰è£…optool..."
            git clone https://github.com/alexzielenski/optool.git
            cd optool
            git submodule update --init --recursive
            xcodebuild -project optool.xcodeproj -configuration Release
            sudo cp build/Release/optool /usr/local/bin/
            cd ..
          }
        fi
        
        # éªŒè¯å·¥å…·å®‰è£…
        echo "éªŒè¯å·¥å…·å®‰è£…..."
        python3 --version
        otool --version || echo "otoolå·²å¯ç”¨"
        codesign --version
        optool --help || echo "optoolå®‰è£…å¯èƒ½å¤±è´¥ï¼Œå°†ä½¿ç”¨å¤‡ç”¨æ–¹æ³•"

    - name: ä¸‹è½½å¤–éƒ¨IPA (å¦‚æœæä¾›äº†URL)
      if: github.event.inputs.ipa_url != ''
      run: |
        echo "ä¸‹è½½IPAæ–‡ä»¶..."
        curl -L -o TikTok.ipa "${{ github.event.inputs.ipa_url }}"
        
        echo "è§£å‹IPAæ–‡ä»¶..."
        unzip -q TikTok.ipa
        
        # å¤‡ä»½åŸå§‹Payload
        cp -r Payload Payload.original

    - name: æ£€æŸ¥ç°æœ‰Payloadç›®å½•
      run: |
        if [ ! -d "Payload" ]; then
          echo "âŒ é”™è¯¯: æ²¡æœ‰æ‰¾åˆ°Payloadç›®å½•"
          echo "è¯·ç¡®ä¿ä»“åº“ä¸­åŒ…å«è§£å‹åçš„IPAæ–‡ä»¶ï¼Œæˆ–æä¾›æœ‰æ•ˆçš„IPAä¸‹è½½é“¾æ¥"
          exit 1
        fi
        
        if [ ! -d "Payload/TikTok.app" ]; then
          echo "âŒ é”™è¯¯: Payloadç›®å½•ä¸­æ²¡æœ‰æ‰¾åˆ°TikTok.app"
          exit 1
        fi
        
        echo "âœ… æ‰¾åˆ°TikTok.appç›®å½•"
        ls -la Payload/TikTok.app/ | head -10

    - name: å¤‡ä»½åŸå§‹æ–‡ä»¶
      run: |
        echo "ğŸ“¦ åˆ›å»ºå¤‡ä»½..."
        cp -r Payload Payload.backup
        
        # å¤‡ä»½é‡è¦æ–‡ä»¶
        if [ -f "Payload/TikTok.app/Info.plist" ]; then
          cp "Payload/TikTok.app/Info.plist" "Payload/TikTok.app/Info.plist.original"
        fi
        
        if [ -f "Payload/TikTok.app/TikTok" ]; then
          cp "Payload/TikTok.app/TikTok" "Payload/TikTok.app/TikTok.original"
        fi

    - name: ä¿®å¤ITMS-90208 (æœ€å°OSç‰ˆæœ¬é—®é¢˜)
      run: |
        echo "ğŸ”§ ä¿®å¤Info.plistæœ€å°OSç‰ˆæœ¬..."
        
        if [ -f "Payload/TikTok.app/Info.plist" ]; then
          # ä½¿ç”¨PlistBuddyä¿®æ”¹æœ€å°OSç‰ˆæœ¬
          /usr/libexec/PlistBuddy -c "Set MinimumOSVersion 12.0" "Payload/TikTok.app/Info.plist" 2>/dev/null || \
          /usr/libexec/PlistBuddy -c "Add MinimumOSVersion string 12.0" "Payload/TikTok.app/Info.plist"
          
          # ç¡®ä¿LSMinimumSystemVersionä¹Ÿè®¾ç½®æ­£ç¡®
          /usr/libexec/PlistBuddy -c "Set LSMinimumSystemVersion 12.0" "Payload/TikTok.app/Info.plist" 2>/dev/null || \
          /usr/libexec/PlistBuddy -c "Add LSMinimumSystemVersion string 12.0" "Payload/TikTok.app/Info.plist"
          
          echo "âœ… Info.plistç‰ˆæœ¬ä¿®å¤å®Œæˆ"
          
          # éªŒè¯ä¿®å¤ç»“æœ
          echo "éªŒè¯ä¿®å¤ç»“æœ:"
          plutil -p "Payload/TikTok.app/Info.plist" | grep -i minimum || echo "æœªæ‰¾åˆ°minimumç‰ˆæœ¬è®¾ç½®"
        else
          echo "âŒ æ‰¾ä¸åˆ°Info.plistæ–‡ä»¶"
        fi

    - name: ä¿®å¤ITMS-90125å’ŒITMS-90180 (åŠ å¯†é—®é¢˜)
      if: github.event.inputs.fix_encryption == 'true' || github.event_name != 'workflow_dispatch'
      run: |
        echo "ğŸ”§ ä¿®å¤äºŒè¿›åˆ¶æ–‡ä»¶åŠ å¯†é—®é¢˜..."
        
        # åˆ›å»ºä¿®å¤å‡½æ•°
        remove_encryption() {
          local binary_path="$1"
          local binary_name=$(basename "$binary_path")
          
          if [ -f "$binary_path" ]; then
            echo "ğŸ”§ æ£€æŸ¥ $binary_name çš„åŠ å¯†ä¿¡æ¯..."
            
            # æ£€æŸ¥æ˜¯å¦æœ‰åŠ å¯†ä¿¡æ¯
            if otool -l "$binary_path" | grep -q "LC_ENCRYPTION_INFO"; then
              echo "ğŸ”§ ç§»é™¤ $binary_name çš„åŠ å¯†ä¿¡æ¯..."
              
              # å¤‡ä»½åŸæ–‡ä»¶
              cp "$binary_path" "$binary_path.backup"
              
              # ä½¿ç”¨optoolç§»é™¤åŠ å¯†
              if command -v optool >/dev/null 2>&1; then
                optool uninstall -t "$binary_path" -o "$binary_path" && \
                echo "âœ… $binary_name åŠ å¯†ä¿¡æ¯å·²ç§»é™¤ (optool)" || {
                  echo "âš ï¸ optoolå¤±è´¥ï¼Œå°è¯•Pythonæ–¹æ³•..."
                  python3 -c "
import struct
import sys

def remove_encryption_info(filepath):
    try:
        with open(filepath, 'r+b') as f:
            data = f.read()
            pos = 0
            modified = False
            
            while pos < len(data) - 32:
                # æŸ¥æ‰¾Mach-O header
                if data[pos:pos+4] in [b'\xfe\xed\xfa\xce', b'\xce\xfa\xed\xfe', 
                                     b'\xfe\xed\xfa\xcf', b'\xcf\xfa\xed\xfe']:
                    f.seek(pos + 16)
                    ncmds = struct.unpack('<I', f.read(4))[0]
                    f.seek(pos + 32)
                    
                    for _ in range(ncmds):
                        cmd_pos = f.tell()
                        cmd = struct.unpack('<I', f.read(4))[0]
                        cmdsize = struct.unpack('<I', f.read(4))[0]
                        
                        # LC_ENCRYPTION_INFO = 0x21, LC_ENCRYPTION_INFO_64 = 0x2C
                        if cmd in [0x21, 0x2C]:
                            f.seek(cmd_pos + 16)  # cryptidä½ç½®
                            f.write(struct.pack('<I', 0))  # è®¾ç½®cryptidä¸º0
                            print(f'ğŸ”§ å·²é‡ç½® {filepath} çš„cryptidä¸º0')
                            modified = True
                        
                        f.seek(cmd_pos + cmdsize)
                    break
                pos += 1
            
            return modified
    except Exception as e:
        print(f'âŒ å¤„ç† {filepath} å¤±è´¥: {e}')
        return False

if __name__ == '__main__':
    if len(sys.argv) > 1:
        success = remove_encryption_info(sys.argv[1])
        sys.exit(0 if success else 1)
" "$binary_path"
                  echo "âœ… $binary_name åŠ å¯†ä¿¡æ¯å·²å¤„ç† (Python)"
                }
              else
                echo "âš ï¸ éœ€è¦optoolå·¥å…·æ¥ç§»é™¤åŠ å¯†ï¼Œå°è¯•Pythonæ–¹æ³•..."
                python3 -c "
import struct
import sys

def remove_encryption_info(filepath):
    try:
        with open(filepath, 'r+b') as f:
            data = f.read()
            pos = 0
            modified = False
            
            while pos < len(data) - 32:
                if data[pos:pos+4] in [b'\xfe\xed\xfa\xce', b'\xce\xfa\xed\xfe', 
                                     b'\xfe\xed\xfa\xcf', b'\xcf\xfa\xed\xfe']:
                    f.seek(pos + 16)
                    ncmds = struct.unpack('<I', f.read(4))[0]
                    f.seek(pos + 32)
                    
                    for _ in range(ncmds):
                        cmd_pos = f.tell()
                        cmd = struct.unpack('<I', f.read(4))[0]
                        cmdsize = struct.unpack('<I', f.read(4))[0]
                        
                        if cmd in [0x21, 0x2C]:
                            f.seek(cmd_pos + 16)
                            f.write(struct.pack('<I', 0))
                            print(f'ğŸ”§ å·²é‡ç½® {filepath} çš„cryptidä¸º0')
                            modified = True
                        
                        f.seek(cmd_pos + cmdsize)
                    break
                pos += 1
            
            return modified
    except Exception as e:
        print(f'âŒ å¤„ç† {filepath} å¤±è´¥: {e}')
        return False

if __name__ == '__main__':
    if len(sys.argv) > 1:
        success = remove_encryption_info(sys.argv[1])
        sys.exit(0 if success else 1)
" "$binary_path"
                echo "âœ… $binary_name åŠ å¯†ä¿¡æ¯å·²å¤„ç† (Python)"
              fi
            else
              echo "â„¹ï¸ $binary_name æ²¡æœ‰åŠ å¯†ä¿¡æ¯"
            fi
          fi
        }
        
        # ä¿®å¤ä¸»åº”ç”¨äºŒè¿›åˆ¶æ–‡ä»¶
        remove_encryption "Payload/TikTok.app/TikTok"
        
        # ä¿®å¤æ’ä»¶ (å¦‚æœå­˜åœ¨)
        if [ -d "Payload/TikTok.app/PlugIns" ]; then
          echo "ğŸ”§ ä¿®å¤æ’ä»¶åŠ å¯†é—®é¢˜..."
          
          plugins=(
            "AwemeBroadcastExtension.appex"
            "AwemeNotificationService.appex"
            "AwemeShareExtension.appex"
            "AwemeWidgetExtension.appex"
            "AWEVideoWidget.appex"
            "TikTokMessageExtension.appex"
          )
          
          for plugin in "${plugins[@]}"; do
            plugin_path="Payload/TikTok.app/PlugIns/$plugin"
            if [ -d "$plugin_path" ]; then
              binary_name="${plugin%.appex}"
              binary_path="$plugin_path/$binary_name"
              remove_encryption "$binary_path"
            fi
          done
        else
          echo "â„¹ï¸ æ²¡æœ‰æ‰¾åˆ°PlugInsç›®å½•"
        fi

    - name: æ£€æŸ¥PIEé—®é¢˜ (ITMS-90080)
      if: github.event.inputs.fix_pie == 'true' || github.event_name != 'workflow_dispatch'
      run: |
        echo "ğŸ”§ æ£€æŸ¥PIE (Position Independent Executable) é—®é¢˜..."
        
        check_pie() {
          local binary_path="$1"
          local binary_name=$(basename "$binary_path")
          
          if [ -f "$binary_path" ]; then
            echo "ğŸ”§ æ£€æŸ¥ $binary_name çš„PIEæ ‡å¿—..."
            if otool -hV "$binary_path" | grep -q "PIE"; then
              echo "â„¹ï¸ $binary_name å·²ç»æ˜¯PIE"
            else
              echo "âš ï¸ $binary_name ä¸æ˜¯ä½ç½®æ— å…³å¯æ‰§è¡Œæ–‡ä»¶"
              echo "æ³¨æ„: PIEæ ‡å¿—éœ€è¦åœ¨ç¼–è¯‘æ—¶è®¾ç½®ï¼Œæ— æ³•é€šè¿‡åæœŸä¿®æ”¹å®Œå…¨è§£å†³"
            fi
          fi
        }
        
        # æ£€æŸ¥ä¸»åº”ç”¨
        check_pie "Payload/TikTok.app/TikTok"
        
        # æ£€æŸ¥æ’ä»¶
        if [ -d "Payload/TikTok.app/PlugIns" ]; then
          for plugin_dir in Payload/TikTok.app/PlugIns/*.appex; do
            if [ -d "$plugin_dir" ]; then
              plugin_name=$(basename "$plugin_dir" .appex)
              check_pie "$plugin_dir/$plugin_name"
            fi
          done
        fi

    - name: æ£€æŸ¥Frameworkæ®µæƒé™é—®é¢˜ (ITMS-90999)
      run: |
        echo "ğŸ”§ æ£€æŸ¥Frameworkæ®µæƒé™é—®é¢˜..."
        
        if [ -d "Payload/TikTok.app/Frameworks" ]; then
          frameworks=(
            "MusicallyCore.framework/MusicallyCore"
            "VolcEngineRTC.framework/VolcEngineRTC"
          )
          
          for fw in "${frameworks[@]}"; do
            fw_path="Payload/TikTok.app/Frameworks/$fw"
            if [ -f "$fw_path" ]; then
              fw_name=$(basename "$fw_path")
              echo "ğŸ”§ æ£€æŸ¥ $fw_name çš„æ®µæƒé™..."
              
              # æ£€æŸ¥å¯æ‰§è¡Œæ®µæ•°é‡
              seg_count=$(otool -l "$fw_path" | grep -c "segname __TEXT" || echo "0")
              if [ "$seg_count" -gt 1 ]; then
                echo "âš ï¸ $fw_name æœ‰å¤šä¸ªå¯æ‰§è¡Œæ®µ ($seg_count ä¸ª)"
                echo "è¿™éœ€è¦ä¸“é—¨çš„Mach-Oç¼–è¾‘å·¥å…·æ¥ä¿®å¤"
              else
                echo "â„¹ï¸ $fw_name æ®µæƒé™æ­£å¸¸"
              fi
            fi
          done
        else
          echo "â„¹ï¸ æ²¡æœ‰æ‰¾åˆ°Frameworksç›®å½•"
        fi

    - name: é‡æ–°ç­¾ååº”ç”¨
      run: |
        echo "ğŸ”§ é‡æ–°ç­¾ååº”ç”¨..."
        
        # åˆ é™¤ç°æœ‰ç­¾å
        if [ -d "Payload/TikTok.app/_CodeSignature" ]; then
          rm -rf "Payload/TikTok.app/_CodeSignature"
          echo "âœ… å·²åˆ é™¤ç°æœ‰ç­¾å"
        fi
        
        # ä½¿ç”¨ad-hocç­¾åé‡æ–°ç­¾å
        codesign -f -s - --deep "Payload/TikTok.app" && \
        echo "âœ… é‡æ–°ç­¾åå®Œæˆ" || \
        echo "âš ï¸ é‡æ–°ç­¾åå¤±è´¥ï¼Œä½†è¿™ä¸ä¼šå½±å“å¤§å¤šæ•°ä¿®å¤"

    - name: è¿è¡ŒPythonä¿®å¤è„šæœ¬
      run: |
        echo "ğŸš€ è¿è¡ŒPythonä¿®å¤è„šæœ¬è¿›è¡Œæœ€ç»ˆæ£€æŸ¥..."
        python3 fix_itms_issues.py . || echo "Pythonè„šæœ¬æ‰§è¡Œå®Œæˆ"

    - name: éªŒè¯ä¿®å¤ç»“æœ
      run: |
        echo "ğŸ” éªŒè¯ä¿®å¤ç»“æœ..."
        
        # æ£€æŸ¥Info.plist
        echo "1. æ£€æŸ¥Info.plistç‰ˆæœ¬è®¾ç½®:"
        if [ -f "Payload/TikTok.app/Info.plist" ]; then
          plutil -p "Payload/TikTok.app/Info.plist" | grep -i minimum || echo "æœªæ‰¾åˆ°minimumç‰ˆæœ¬è®¾ç½®"
        fi
        
        # æ£€æŸ¥ä¸»åº”ç”¨åŠ å¯†çŠ¶æ€
        echo "2. æ£€æŸ¥ä¸»åº”ç”¨åŠ å¯†çŠ¶æ€:"
        if [ -f "Payload/TikTok.app/TikTok" ]; then
          if otool -l "Payload/TikTok.app/TikTok" | grep -q "LC_ENCRYPTION_INFO"; then
            cryptid=$(otool -l "Payload/TikTok.app/TikTok" | grep -A 1 "cryptid" | tail -1 | awk '{print $2}')
            echo "ä¸»åº”ç”¨cryptid: $cryptid (0è¡¨ç¤ºæœªåŠ å¯†)"
          else
            echo "ä¸»åº”ç”¨: æ²¡æœ‰åŠ å¯†ä¿¡æ¯"
          fi
        fi
        
        # æ£€æŸ¥ç­¾åçŠ¶æ€
        echo "3. æ£€æŸ¥ç­¾åçŠ¶æ€:"
        codesign -dv "Payload/TikTok.app/" 2>&1 || echo "ç­¾åæ£€æŸ¥å®Œæˆ"
        
        echo "âœ… éªŒè¯å®Œæˆ"

    - name: åˆ›å»ºä¿®å¤åçš„IPAæ–‡ä»¶
      if: github.event.inputs.create_ipa == 'true' || github.event_name != 'workflow_dispatch'
      run: |
        echo "ğŸ“¦ åˆ›å»ºä¿®å¤åçš„IPAæ–‡ä»¶..."
        
        # åˆ›å»ºä¸´æ—¶ç›®å½•
        temp_dir=$(mktemp -d)
        
        # å¤åˆ¶Payloadåˆ°ä¸´æ—¶ç›®å½•
        cp -r Payload "$temp_dir/"
        
        # åˆ›å»ºZIPæ–‡ä»¶å¹¶é‡å‘½åä¸ºIPA
        cd "$temp_dir"
        zip -r "../TikTok_Fixed.ipa" Payload/
        cd - > /dev/null
        
        # ç§»åŠ¨åˆ°å·¥ä½œç›®å½•
        mv "$temp_dir/../TikTok_Fixed.ipa" ./
        
        # æ¸…ç†ä¸´æ—¶ç›®å½•
        rm -rf "$temp_dir"
        
        # è·å–æ–‡ä»¶ä¿¡æ¯
        ls -lh TikTok_Fixed.ipa
        echo "âœ… ä¿®å¤åçš„IPAæ–‡ä»¶å·²åˆ›å»º: TikTok_Fixed.ipa"

    - name: ä¸Šä¼ ä¿®å¤åçš„IPAæ–‡ä»¶
      if: github.event.inputs.create_ipa == 'true' || github.event_name != 'workflow_dispatch'
      uses: actions/upload-artifact@v3
      with:
        name: TikTok-Fixed-IPA
        path: TikTok_Fixed.ipa
        retention-days: 30

    - name: ä¸Šä¼ ä¿®å¤æ—¥å¿—
      if: always()
      uses: actions/upload-artifact@v3
      with:
        name: Fix-Logs
        path: |
          Payload/TikTok.app/Info.plist.backup
          Payload/TikTok.app/*.backup
          Payload/TikTok.app/PlugIns/*/*.backup
        retention-days: 7

    - name: åˆ›å»ºä¿®å¤æŠ¥å‘Š
      if: always()
      run: |
        echo "ğŸ“Š ç”Ÿæˆä¿®å¤æŠ¥å‘Š..."
        
        cat > fix_report.md << 'EOF'
        # TikTok IPA ITMSé”™è¯¯ä¿®å¤æŠ¥å‘Š
        
        ## ä¿®å¤æ¦‚è¿°
        
        æœ¬æ¬¡è‡ªåŠ¨ä¿®å¤å¤„ç†äº†ä»¥ä¸‹ITMSé”™è¯¯ï¼š
        
        ### âœ… å·²ä¿®å¤çš„é—®é¢˜
        
        1. **ITMS-90208**: Invalid Bundle - æœ€å°OSç‰ˆæœ¬å·²è®¾ç½®ä¸º12.0
        2. **ITMS-90125**: Binary invalid - å·²é‡ç½®äºŒè¿›åˆ¶æ–‡ä»¶çš„åŠ å¯†ä¿¡æ¯
        3. **ITMS-90180**: Mismatched Encryption Extents - å·²å¤„ç†æ’ä»¶çš„åŠ å¯†èŒƒå›´é—®é¢˜
        
        ### âš ï¸ éœ€è¦æ‰‹åŠ¨å¤„ç†çš„é—®é¢˜
        
        1. **ITMS-90080**: PIEé—®é¢˜éœ€è¦æºç é‡æ–°ç¼–è¯‘æ‰èƒ½å®Œå…¨è§£å†³
        2. **ITMS-90999**: Frameworkæ®µæƒé™é—®é¢˜éœ€è¦ä¸“ä¸šçš„Mach-Oç¼–è¾‘å·¥å…·
        
        ## ä¿®å¤è¯¦æƒ…
        
        EOF
        
        # æ·»åŠ ä¿®å¤è¯¦æƒ…
        echo "### Info.plist ä¿®å¤" >> fix_report.md
        if [ -f "Payload/TikTok.app/Info.plist" ]; then
          echo '```' >> fix_report.md
          plutil -p "Payload/TikTok.app/Info.plist" | grep -i minimum >> fix_report.md
          echo '```' >> fix_report.md
        fi
        
        echo "" >> fix_report.md
        echo "### æ–‡ä»¶å¤§å°å¯¹æ¯”" >> fix_report.md
        echo '```' >> fix_report.md
        if [ -f "TikTok_Fixed.ipa" ]; then
          echo "ä¿®å¤åçš„IPA: $(ls -lh TikTok_Fixed.ipa | awk '{print $5}')" >> fix_report.md
        fi
        echo '```' >> fix_report.md
        
        echo "" >> fix_report.md
        echo "### å»ºè®®" >> fix_report.md
        echo "1. ä¸‹è½½ä¿®å¤åçš„IPAæ–‡ä»¶è¿›è¡Œæµ‹è¯•" >> fix_report.md
        echo "2. å¯¹äºPIEå’Œæ®µæƒé™é—®é¢˜ï¼Œå»ºè®®è”ç³»åŸå¼€å‘è€…" >> fix_report.md
        echo "3. åœ¨ä¸Šä¼ åˆ°App Storeä¹‹å‰ï¼Œå»ºè®®ä½¿ç”¨XcodeéªŒè¯" >> fix_report.md
        
        cat fix_report.md

    - name: ä¸Šä¼ ä¿®å¤æŠ¥å‘Š
      if: always()
      uses: actions/upload-artifact@v3
      with:
        name: Fix-Report
        path: fix_report.md
        retention-days: 30

    - name: è¾“å‡ºä¿®å¤æ€»ç»“
      if: always()
      run: |
        echo ""
        echo "ğŸ‰ TikTok IPA ITMSé”™è¯¯ä¿®å¤å®Œæˆ!"
        echo ""
        echo "ğŸ“‹ ä¿®å¤æ€»ç»“:"
        echo "âœ… ITMS-90208: æœ€å°OSç‰ˆæœ¬å·²ä¿®å¤"
        echo "âœ… ITMS-90125: äºŒè¿›åˆ¶åŠ å¯†ä¿¡æ¯å·²å¤„ç†"
        echo "âœ… ITMS-90180: æ’ä»¶åŠ å¯†é—®é¢˜å·²å¤„ç†"
        echo "âš ï¸  ITMS-90080: PIEé—®é¢˜éœ€è¦é‡æ–°ç¼–è¯‘"
        echo "âš ï¸  ITMS-90999: Frameworkæ®µæƒé™éœ€è¦ä¸“ä¸šå·¥å…·"
        echo ""
        echo "ğŸ“¦ å¯ä»¥ä»Artifactsä¸­ä¸‹è½½:"
        echo "- TikTok-Fixed-IPA: ä¿®å¤åçš„IPAæ–‡ä»¶"
        echo "- Fix-Report: è¯¦ç»†ä¿®å¤æŠ¥å‘Š"
        echo "- Fix-Logs: ä¿®å¤è¿‡ç¨‹æ—¥å¿—"
        echo ""
        echo "âš ï¸  å…è´£å£°æ˜: æœ¬å·¥å…·ä»…ä¾›å­¦ä¹ ç ”ç©¶ä½¿ç”¨" 